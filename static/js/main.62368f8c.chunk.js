(this["webpackJsonptodo-list"]=this["webpackJsonptodo-list"]||[]).push([[0],{112:function(t,e,n){},113:function(t,e,n){},117:function(t,e,n){},120:function(t,e,n){},122:function(t,e,n){},123:function(t,e,n){},142:function(t,e,n){},242:function(t,e,n){},243:function(t,e,n){},244:function(t,e,n){},245:function(t,e,n){},246:function(t,e,n){},247:function(t,e,n){},248:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),s=n(50),r=n.n(s),i=(n(112),n.p,n(113),n(24)),u=n(7),o=n(12),l=(n(117),n.p+"static/media/user.8cab7b59.svg"),d=n(1),j=Object(o.b)((function(t){return{login:t.auth.login}}))((function(t){var e=Object(u.e)();return Object(d.jsxs)("div",{className:"header",children:[Object(d.jsx)("div",{className:"header__logo",children:"TODO-LIST"}),Object(d.jsxs)("div",{className:"header__loginBlock",onClick:function(){return e.push("/login")},children:[Object(d.jsx)("img",{src:l,alt:"User IMG"}),Object(d.jsx)(i.b,{className:"loginBlock__item",to:"/login",children:t.login||"Sing in"})]})]})})),b=(n(120),function(t){return Object(d.jsx)("div",{className:"footer"})}),f=n(5),O=n.n(f),p=n(11),m=(n(122),n(30)),h=n(4),x=n(106),v=(n(123),["input","meta"]),k=function(t){var e=t.input,n=t.meta,a=Object(x.a)(t,v),c=n.touched&&n.error;return Object(d.jsx)(a.name,Object(h.a)(Object(h.a)(Object(h.a)({},a),e),{},{className:"formControl"+(c?" error":"")}))},g=function(t){return Object(d.jsx)(k,Object(h.a)({name:"input"},t))},_=n(250),T=n(249),C=n(103).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.1/",headers:{"API-KEY":"8aab515b-a7ff-412f-94c0-660df0312e47"}}),N=function(){return C.get("auth/me")},w=function(t){return C.post("auth/login",t)},y=function(){return C.delete("auth/login")},S=function(t){return C.post("todo-lists",{title:t})},L=function(){return C.get("todo-lists")},E=function(t,e){return C.put("todo-lists/".concat(t),{title:e})},A=function(t){return C.delete("todo-lists/".concat(t))},I=function(t,e){return C.post("todo-lists/".concat(t,"/tasks"),{title:e})},D=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return C.get("todo-lists/".concat(t,"/tasks"),{count:e,page:n})},F=function(t,e,n){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),{title:n})},B=function(t,e,n,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),{title:a,status:Number(n)})},K=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},P=n(21),z="SET_LIST",M="DELETE_LIST",R="CLEAN_LISTS",U="SET_TASKS",G="SET_NEW_TASK",H="DELETE_TASK",J="SET_TASK_AFTER_CHENGE",q=function(t,e){return{type:H,idList:t,idTask:e}},Q=function(t){return{type:J,task:t}},W=function(t){return function(){var e=Object(p.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:if(e.sent.data.resultCode){e.next=6;break}return n(X()),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X=function(){return function(){var t=Object(p.a)(O.a.mark((function t(e){var n,a;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L();case 2:(n=t.sent)&&e((c=n.data,{type:z,lists:c})),a=n.data.map((function(t){return t.id})),Promise.all(Object(P.a)(a.map((function(t){return D(t)})))).then((function(t){e({type:U,tasks:t})}));case 6:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}()},Y={lists:[],listsIds:[]},V=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case z:return 0==e.lists.length?Object(h.a)(Object(h.a)({},t),{},{lists:null}):Object(h.a)(Object(h.a)({},t),{},{listsIds:Object(P.a)(e.lists.map((function(t){return t.id}))),lists:Object(P.a)(e.lists).map((function(t){return Object(h.a)(Object(h.a)({},t),{},{tasks:[]})}))});case R:return Object(h.a)(Object(h.a)({},t),{},{lists:[]});case M:return Object(h.a)(Object(h.a)({},t),{},{lists:Object(P.a)(t.lists.filter((function(t){return t.id!=e.idList})))});case U:return Object(h.a)(Object(h.a)({},t),{},{lists:Object(P.a)(t.lists.map((function(t,n){return Object(h.a)(Object(h.a)({},t),{},{tasks:Object(P.a)(e.tasks[n].data.items)})})))});case G:return Object(h.a)(Object(h.a)({},t),{},{lists:Object(P.a)(t.lists.map((function(t){return t.id==e.task.todoListId?Object(h.a)(Object(h.a)({},t),{},{tasks:[e.task].concat(Object(P.a)(t.tasks))}):t})))});case H:return Object(h.a)(Object(h.a)({},t),{},{lists:Object(P.a)(t.lists.map((function(t){return t.id==e.idList?Object(h.a)(Object(h.a)({},t),{},{tasks:t.tasks.filter((function(t){return t.id!=e.idTask}))}):t})))});case J:return Object(h.a)(Object(h.a)({},t),{},{lists:Object(P.a)(t.lists.map((function(t){return t.id==e.task.todoListId?Object(h.a)(Object(h.a)({},t),{},{tasks:t.tasks.map((function(t){return t.id==e.task.id?e.task:t}))}):t})))});default:return t}},Z="AUTH_ME",$="LOGOUT_USER",tt=function(t){var e=t.login,n=t.email,a=t.id;return{type:Z,login:e,email:n,id:a}},et=function(){return function(){var t=Object(p.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N();case 2:return(n=t.sent).data.resultCode||e(tt(n.data.data)),t.abrupt("return",!0);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},nt={isAuth:!1,login:null,email:null,id:null},at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Z:return Object(h.a)(Object(h.a)({},t),{},{isAuth:!0,login:e.login,email:e.email,id:e.id});case $:return Object(h.a)(Object(h.a)({},t),{},{isAuth:!1,login:null,email:null,id:null});default:return t}},ct=n(10),st=n(15),rt=(n(142),n.p+"static/media/arrow-exit.a244d6b7.svg"),it=function(t){return{}},ut=function(t){return Object(o.b)(it)((function(e){var n=Object(a.useState)(!1),c=Object(st.a)(n,2),s=c[0],r=c[1],i=Object(u.e)();Object(a.useEffect)((function(){setTimeout((function(){return r(!0)}),50)}),[]);var o=function(){r(!1),setTimeout((function(){i.push("")}),500)};return Object(d.jsx)("div",{className:m("modal",{active:s}),onClick:function(){return o()},children:Object(d.jsxs)("div",{className:m("modal__content",{active:s}),onClick:function(t){return t.stopPropagation()},children:[Object(d.jsx)("div",{className:"modal_exit",onClick:function(){return o()},children:Object(d.jsx)("img",{src:rt,alt:"X"})}),Object(d.jsx)(t,Object(h.a)(Object(h.a)({},e),{},{unmount:o}))]})})}))},ot=Object(T.a)({form:"login"})((function(t){return Object(d.jsxs)("form",{onSubmit:t.handleSubmit,className:"form",children:[Object(d.jsx)("div",{className:"form__input_email input",children:Object(d.jsx)(_.a,{type:"text",placeholder:"Email",component:g,name:"email"})}),Object(d.jsx)("div",{className:"form__input_password input",children:Object(d.jsx)(_.a,{type:"text",placeholder:"Password",component:g,name:"password"})}),Object(d.jsx)("div",{className:"form__checkbox_rememberme",children:Object(d.jsx)(_.a,{type:"checkbox",component:g,name:"rememberMe",id:"rememberMe"})}),Object(d.jsx)("label",{htmlFor:"rememberMe",className:"form__input_text",children:"Remember me"}),Object(d.jsx)("button",{className:"form__btnlogin btn",children:"Login"})]})})),lt=Object(ct.d)(ut,u.g,Object(o.b)((function(t){return{isAuth:t.auth.isAuth}}),{loginingTC:function(t){return function(){var t=Object(p.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={email:"641027B@gmail.com",password:"qwerty123",rememberMe:!0},t.next=3,w(n);case 3:if(t.sent.data.resultCode){t.next=8;break}return e(et()),e(X()),t.abrupt("return",!0);case 8:case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},logoutTC:function(){return function(){var t=Object(p.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y();case 2:t.sent.data.resultCode||(e({type:$}),e({type:R}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}))((function(t){var e=function(){var e=Object(p.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loginingTC(n);case 2:e.sent&&t.unmount();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)("div",{className:"login",children:[t.isAuth?Object(d.jsx)("h3",{className:"modal_title",children:"Quit"}):Object(d.jsx)("h3",{className:"modal_title",children:"Sing In"}),t.isAuth?Object(d.jsx)("button",{onClick:function(){t.logoutTC(),t.unmount()},className:"login__logout-btn btn",children:"Logout"}):Object(d.jsx)(ot,{onSubmit:e})]})})),dt=(n(242),function(t){return Object(d.jsxs)("div",{className:"lds-ripple",children:[Object(d.jsx)("div",{}),Object(d.jsx)("div",{})]})}),jt=(n(243),n(244),Object(ct.d)(ut,u.g,Object(o.b)(null,{deleteListTC:function(t){return function(){var e=Object(p.a)(O.a.mark((function e(n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t);case 2:if(e.sent.data.resultCode){e.next=6;break}return n({type:M,idList:t}),e.abrupt("return",!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}))((function(t){var e=Object(u.f)().id,n=(Object(u.e)(),function(){var n=Object(p.a)(O.a.mark((function n(){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.deleteListTC(e);case 2:n.sent&&t.unmount();case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}());return Object(d.jsxs)("div",{onKeyPress:function(t){console.log(t),"Enter"==t.code&&n()},className:"delwar",children:[Object(d.jsx)("h3",{className:"modal_title delwar__title",children:"Delete List"}),Object(d.jsx)("div",{className:"delwar__text",children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0434\u0430\u0447?"}),Object(d.jsx)("button",{className:"delwar__btn btn btn-yes",onClick:n,children:"\u0414\u0430"}),Object(d.jsx)("button",{className:"delwar__btn btn btn-no",onClick:t.unmount,children:"\u041d\u0435\u0442"})]})}))),bt=(n(245),n(246),n.p+"static/media/dry-clean.a137131d.svg"),ft=n.p+"static/media/check1.d644c682.svg",Ot=n.p+"static/media/check0.06efe408.svg",pt=n.p+"static/media/delete.ec5dc9a8.svg",mt=function(t){var e=Object(a.useState)(!1),n=Object(st.a)(e,2),c=n[0],s=n[1],r=Object(a.useState)(!1),i=Object(st.a)(r,2),u=i[0],o=i[1],l=Object(a.useState)(),j=Object(st.a)(l,2),b=j[0],f=j[1],h=Object(a.useState)(!1),x=Object(st.a)(h,2),v=x[0],k=x[1];Object(a.useEffect)((function(){t.title&&f(t.title)}),[t.title]),Object(a.useEffect)((function(){k(!1),o(Boolean(t.status))}),[t.status]);var g=function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0),t.chengeComplitedStatusTC(t.todoListId,t.id,!u,b);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){c&&b!=t.title&&t.chengeTaskTextTC(t.todoListId,t.id,b),s(!c)};return console.log("RENDER TASK"),Object(d.jsxs)("div",{className:"task",children:[Object(d.jsx)("div",{className:"task__check-block",children:v?Object(d.jsx)("img",{src:Ot,className:"task__check-block_loading",alt:""}):u?Object(d.jsx)("img",{onClick:g,src:ft,alt:""}):Object(d.jsx)("img",{onClick:g,src:bt,alt:""})}),Object(d.jsxs)("div",{onDoubleClick:_,className:"task__text",children:[c?Object(d.jsx)("input",{className:"task__text_input input",type:"text",placeholder:"Enter the task...",value:b,onChange:function(t){f(t.target.value)},onBlur:_,autoFocus:!0,maxLength:"100"}):Object(d.jsx)("span",{onClick:function(){return console.log(v,u)},className:m("task__text_span",{done:u}),children:(null===t||void 0===t?void 0:t.title)||"\u043d\u0443\u0436\u043d\u043e \u0434\u043e\u0434\u0435\u043b\u0430\u0442\u044c TODO \u043b\u0438\u0441\u0442"}),Object(d.jsx)("div",{className:"help-buttons",children:Object(d.jsx)("span",{className:"help-buttons__item delete",children:Object(d.jsx)("img",{onClick:function(){t.deleteTaskTC(t.todoListId,t.id)},src:pt,alt:""})})})]})]})},ht=n.p+"static/media/info.e67af643.svg",xt=n.p+"static/media/add.e353df1d.svg",vt=Object(o.b)(null,{renameListTC:function(t,e){return function(){var n=Object(p.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E(t,e);case 2:n.sent.data.resultCode||a(X());case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()},createNewTaskTC:function(t){return function(){var e=Object(p.a)(O.a.mark((function e(n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,"\u0412\u0430\u0448\u0430 \u0437\u0430\u0434\u0430\u0447\u0430");case 2:(a=e.sent).data.resultCode||n((c=a.data.data.item,{type:G,task:c}));case 4:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()},chengeTaskTextTC:function(t,e,n){return function(){var a=Object(p.a)(O.a.mark((function a(c){var s;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n){a.next=7;break}return a.next=3,K(t,e);case 3:a.sent.data.resultCode||c(q(t,e)),a.next=11;break;case 7:return a.next=9,F(t,e,n);case 9:(s=a.sent).data.resultCode||c(Q(s.data.data.item));case 11:case"end":return a.stop()}}),a)})));return function(t){return a.apply(this,arguments)}}()},chengeComplitedStatusTC:function(t,e,n,a){return function(){var c=Object(p.a)(O.a.mark((function c(s){var r;return O.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,B(t,e,n,a);case 2:(r=c.sent).data.resultCode||s(Q(r.data.data.item));case 4:case"end":return c.stop()}}),c)})));return function(t){return c.apply(this,arguments)}}()},deleteTaskTC:function(t,e){return function(){var n=Object(p.a)(O.a.mark((function n(a){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,K(t,e);case 2:n.sent.data.resultCode||a(q(t,e));case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}})((function(t){var e=t.infoAboutList,n=t.tasks,c=t.renameListTC,s=t.createNewTaskTC,r=t.chengeTaskTextTC,i=t.chengeComplitedStatusTC,o=t.deleteTaskTC,l=Object(a.useState)(!1),j=Object(st.a)(l,2),b=j[0],f=j[1],O=Object(a.useState)(e.title),p=Object(st.a)(O,2),m=p[0],x=p[1],v=Object(u.e)(),k=function(){b&&m!=e.title&&c(e.id,m),f(!b)};return Object(a.useEffect)((function(){x(e.title)}),[e.title]),Object(d.jsxs)("div",{className:"list",children:[Object(d.jsxs)("div",{className:"list__title",onDoubleClick:k,children:[b?Object(d.jsx)("input",{className:"list__title_input input",type:"text",value:m,onChange:function(t){x(t.target.value)},onBlur:k,autoFocus:!0}):Object(d.jsx)("span",{className:"list__title_span",children:m}),Object(d.jsxs)("div",{className:"help-buttons",children:[Object(d.jsx)("span",{className:"help-buttons__item info",children:Object(d.jsx)("img",{src:ht,alt:""})}),Object(d.jsx)("span",{className:"help-buttons__item delete",children:Object(d.jsx)("img",{onClick:function(){return v.push("/delete-warning/".concat(e.id))},src:pt,alt:""})})]})]}),Object(d.jsx)("div",{className:"list__tasks",children:n.map((function(t,e){return Object(d.jsx)(mt,Object(h.a)({chengeTaskTextTC:r,createNewTaskTC:s,chengeComplitedStatusTC:i,deleteTaskTC:o},t),e)}))}),Object(d.jsx)("div",{className:"add-task",children:Object(d.jsx)("img",{onClick:function(){return s(e.id)},src:xt,alt:"",title:"Add task"})})]})})),kt=Object(o.b)((function(t){return{lists:t.todo.lists,isAuth:t.auth.isAuth}}),{createNewListTC:W})((function(t){var e=Object(a.useState)(),n=Object(st.a)(e,2);n[0],n[1],Object(u.e)();return t.isAuth?Array.isArray(t.lists)&&0==t.lists.length?Object(d.jsx)("div",{className:"preloader-wrapper",children:Object(d.jsx)(dt,{})}):Object(d.jsxs)("div",{className:"main",children:[t.lists.map((function(t,e){return Object(d.jsx)(vt,{infoAboutList:t,tasks:t.tasks},e)})),Object(d.jsx)("div",{className:"addList",children:Object(d.jsx)(i.b,{to:"/add-list",children:Object(d.jsx)("img",{src:xt,alt:"",title:"Add TODO list"})})})]}):null})),gt="SET_INIT",_t={initialized:!1},Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case gt:return Object(h.a)(Object(h.a)({},t),{},{initialized:!0});default:return t}},Ct=(n(247),Object(ct.d)(ut,Object(o.b)(null,{createNewListTC:W}))((function(t){var e=Object(a.useState)(),n=Object(st.a)(e,2),c=n[0],s=n[1],r=(Object(u.e)(),function(){var e=Object(p.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.createNewListTC(c);case 4:e.sent&&t.unmount();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(d.jsxs)("div",{className:"add-list",children:[Object(d.jsx)("h3",{className:"modal_title",children:"Create List"}),Object(d.jsx)("input",{autoFocus:!0,onKeyPress:function(t){console.log(t),"Enter"==t.code&&r()},onChange:function(t){s(t.target.value)},value:c,className:"add-list_input input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),Object(d.jsx)("button",{onClick:r,className:"add-list_btn btn",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})));var Nt=Object(o.b)((function(t){return{initialized:t.init.initialized}}),{initializeAppTC:function(){return function(){var t=Object(p.a)(O.a.mark((function t(e){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(et());case 2:t.sent&&e(X()),e({type:gt});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})((function(t){return Object(a.useEffect)((function(){t.initializeAppTC()}),[]),t.initialized?Object(d.jsx)(i.a,{children:Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(j,{}),Object(d.jsx)(u.a,{path:"/login",render:function(){return Object(d.jsx)(lt,{})}}),Object(d.jsx)(u.a,{path:"/add-list",render:function(){return Object(d.jsx)(Ct,{})}}),Object(d.jsx)(u.a,{path:"/delete-warning/:id",render:function(){return Object(d.jsx)(jt,{})}}),Object(d.jsx)(kt,{}),Object(d.jsx)(b,{})]})}):Object(d.jsx)(dt,{})})),wt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,252)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,s=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),s(t),r(t)}))},yt=n(251),St=n(105),Lt=Object(ct.c)({auth:at,todo:V,form:yt.a,init:Tt}),Et=Object(ct.e)(Lt,Object(ct.a)(St.a));window.store=Et;var At=Et;r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(o.a,{store:At,children:Object(d.jsx)(Nt,{})})}),document.getElementById("root")),wt()}},[[248,1,2]]]);
//# sourceMappingURL=main.62368f8c.chunk.js.map